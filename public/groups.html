<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Group Management</title>
  <style>body{font-family:Arial,sans-serif;margin:2rem;}label{display:block;margin-top:1rem;}input,textarea{width:100%;padding:0.5rem;margin-top:0.2rem;}button{margin-top:1rem;padding:0.5rem 1rem;background:#25d366;color:#fff;border:none;cursor:pointer;}a{display:inline-block;margin-top:2rem;}</style>
</head>
<body>
  <h1>Group Management</h1>
  <form id="groupMgmtForm">
    <label>Group ID:<input type="text" name="groupId" required></label>
    <label>Participant (for add/remove/set/remove admin):<input type="text" name="participant"></label>
    <label>New Name (for update name):<input type="text" name="name"></label>
    <label>Settings (JSON for update settings):<textarea name="settings"></textarea></label>
    <button type="button" onclick="doAction('add')">Add Participant</button>
    <button type="button" onclick="doAction('remove')">Remove Participant</button>
    <button type="button" onclick="doAction('setadmin')">Set Admin</button>
    <button type="button" onclick="doAction('removeadmin')">Remove Admin</button>
    <button type="button" onclick="doAction('updatename')">Update Name</button>
    <button type="button" onclick="doAction('updatesettings')">Update Settings</button>
    <button type="button" onclick="doAction('leave')">Leave Group</button>
  </form>
  <div id="result"></div>
  <a href="index.html">&larr; Back to Main</a>
  <script>
    async function doAction(action) {
      const groupId = document.querySelector('[name=groupId]').value;
      const participant = document.querySelector('[name=participant]').value;
      const name = document.querySelector('[name=name]').value;
      const settings = document.querySelector('[name=settings]').value;
      let url, body;
      switch(action) {
        case 'add': url = '/groups/add-participant'; body = { groupId, participant }; break;
        case 'remove': url = '/groups/remove-participant'; body = { groupId, participant }; break;
        case 'setadmin': url = '/groups/set-admin'; body = { groupId, participant }; break;
        case 'removeadmin': url = '/groups/remove-admin'; body = { groupId, participant }; break;
        case 'updatename': url = '/groups/update-name'; body = { groupId, name }; break;
        case 'updatesettings': url = '/groups/update-settings'; body = { groupId, settings: settings ? JSON.parse(settings) : {} }; break;
        case 'leave': url = '/groups/leave'; body = { groupId }; break;
      }
      const res = await fetch(url, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(body)
      });
      document.getElementById('result').innerText = await res.text();
    }
  </script>
</body>
</html>
